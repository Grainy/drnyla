var brandGrid=function(e){var i=function(){t()},t=function(){e(".b-brand-grid__module--background").hover(function(){e(this).addClass("blur"),e(this).siblings(".b-brand-grid__module--content").find(".js-hover").removeClass("hide")},function(){e(this).removeClass("blur"),e(this).siblings(".b-brand-grid__module--content").find(".js-hover").addClass("hide")}),e(".b-brand-grid__module--content").hover(function(){e(this).siblings(".b-brand-grid__module--background").addClass("blur"),e(this).find(".js-hover").removeClass("hide")},function(){e(this).siblings(".b-brand-grid__module--background").removeClass("blur"),e(this).find(".js-hover").addClass("hide")})};return{init:i}}(jQuery),cookiePolicy=function(e){var i=function(){var i=Cookies.get("cookieAccept");i||(e(".b-cookie-policy").show(),t())},t=function(){var i=e(".b-cookie-policy").outerHeight(),t=e(".l-masthead").outerHeight();e(".l-masthead").addClass("cookie-active"),e(".l-hero").length?e(".l-hero").addClass("cookie-active"):e(".l-page-section").eq(0).addClass("cookie-active"),e(".l-masthead.cookie-active").css("top",i+"px"),e(".l-hero").length?e(".l-hero.cookie-active").css("margin-top",i+t+"px"):e(".l-page-section.cookie-active").css({"margin-top":i+t+"px","padding-top":0}),e(".js-cookie-policy").on("click",function(i){i.preventDefault(),Cookies.set("cookieAccept",!0),e(".l-masthead").removeClass("cookie-active"),e(".l-hero").length?e(".l-hero").removeClass("cookie-active"):e(".l-page-section.cookie-active").removeClass("cookie-active"),e(".l-masthead").css("top",0),e(".l-hero").length?e(".l-hero").css("margin-top",t):e(".l-page-section").eq(0).css("margin-top",t),e(".b-cookie-policy").hide()})};return{init:i}}(jQuery);jQuery(document).ready(function(e){cookiePolicy.init()});var faqs=function(e){var i=function(){o()},t=function(i,t,o){i.siblings(t).is(":visible")?(i.removeClass("active"),i.siblings(t).slideUp()):(e(".l-archive-conditions__condition h3").removeClass("active"),e(t).slideUp(),i.addClass("active"),i.siblings(t).slideDown())},o=function(){e(".l-archive-conditions__condition h3").on("click",function(i){t(e(this),".l-archive-conditions__condition--content")})};return{init:i}}(jQuery);!function(e){var i="undefined"!=typeof e("<input/>")[0].multiple,t=/msie/i.test(navigator.userAgent);e.fn.customFile=function(){return this.each(function(){var o=e(this).addClass("custom-file-upload-hidden"),n=e('<div class="file-upload-wrapper">'),a=e('<input type="text" class="file-upload-input" />'),s=e('<button type="button" class="file-upload-button">Choose File</button>'),l=e('<label class="file-upload-button" for="'+o[0].id+'">Choose File</label>');o.css({position:"absolute",left:"-9999px"}),n.insertAfter(o).append(o,a,t?l:s),o.attr("tabIndex",-1),s.attr("tabIndex",-1),s.click(function(){o.focus().click()}),o.change(function(){var e,t,n=[];if(i){e=o[0].files;for(var s=0,l=e.length;s<l;s++)n.push(e[s].name);t=n.join(", ")}else t=o.val().split("\\").pop();a.val(t).attr("title",t).focus()}),a.on({blur:function(){o.trigger("blur")},keydown:function(e){if(13===e.which)t||o.trigger("click");else{if(8!==e.which&&46!==e.which)return 9===e.which&&void 0;o.replaceWith(o=o.clone(!0)),o.trigger("change"),a.val("")}}})})},i||e(document).on("change","input.customfile",function(){var i=e(this),t="customfile_"+(new Date).getTime(),o=i.parent(),n=o.siblings().find(".file-upload-input").filter(function(){return!this.value}),a=e('<input type="file" id="'+t+'" name="'+i.attr("name")+'"/>');setTimeout(function(){i.val()?n.length||(o.after(a),a.customFile()):(n.parent().remove(),o.appendTo(o.parent()),o.find("input").focus())},1)})}(jQuery),jQuery("input[type=file]").customFile();var footer=function(e){var i=function(){t()},t=function(){e(".l-mobile-footer__section").on("click",function(i){e(this).toggleClass("active"),e(this).find("ul").slideToggle()})};return{init:i}}(jQuery),map=function(e){var i,t,o=function(){var e=map_location.lat,o=map_location.lng,n=new google.maps.LatLng(e,o);i=new google.maps.Map(document.getElementById("map-canvas"),{center:n,zoom:16});new google.maps.Marker({position:i.getCenter(),map:i});t=new google.maps.InfoWindow},n=function(){o()};return{init:n}}(jQuery),mobileNav=function(e){var i,t=function(){o()},o=function(){e(".burger-icon").on("touchstart click",function(){i||(e(".burger-icon, .js-mobile-nav").toggleClass("menu-active"),e("header").toggleClass("animated"),e(".has-dropdown").toggleClass("active")),i=!i})};return{init:t}}(jQuery),sharing=function(e){"use strict";function i(){e(".js-fb-share").on("click",function(e){e.preventDefault(),t()})}var t=function(){var e=window.location.href;FB.ui({method:"feed",link:e},function(e){})};return{init:i}}(jQuery);jQuery(document).ready(function(e){sharing.init()});var signUp=function(e){function i(e){var i=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return i.test(e)}var t=function(){a(),o(),e("form").submit(function(e){e.preventDefault(),n(this)})},o=function(){e("input").change(function(){e(this).hasClass("error")&&""!==e(this).val()?(e(this).removeClass("error"),e(this).next(".error-message").hide(),"email"!=e(this).attr("type")||i(e(this).val())||(e(this).addClass("error"),e(this).after('<p class="error-message">Invalid email format</p>'))):e(this).hasClass("error")&&""===e(this).val()&&"email"==e(this).attr("type")&&(e(this).next(".error-message").hide(),e(this).after('<p class="error-message">Email is required.</p>'))})},n=function(i){var t;t=!!e("input#signup").is(":checked");var o={name:e("input[name=name]").val(),email:e("input[name=email]").val(),sector:e("input[name=sector]:checked").val(),signup:t};e.ajax({type:"POST",url:Directory.url+"/process.php",data:o,dataType:"json",encode:!0}).done(function(i){i.success?e(".l-form-overlay__inner--form").html('<div class="success-message text-center"><p>'+i.message+"</p></div>"):(e.each(i.errors,function(i,t){e('input[name="'+i+'"]').hasClass("error")||e('input[name="'+i+'"]').addClass("error").after('<p class="error-message">'+t+"</p>")}),e("input.error").eq(0).focus())})},a=function(){e(document).on("click",".l-form-overlay.active",function(i){i.stopPropagation(),e(i.target).is(".l-form-overlay.active")&&e(".l-form-overlay").removeClass("active")}),e(".b-button--signup").on("click",function(i){i.preventDefault(),e(".l-form-overlay").addClass("active")}),e(".js-form-close").on("click",function(i){i.preventDefault(),e(".l-form-overlay").removeClass("active")})};return{init:t}}(jQuery);jQuery(document).ready(function(e){signUp.init()});var singlePageNav=function(e){var i=function(){e(window).width()>=768&&t(),o()},t=function(){var i=e(".b-about-section__nav"),t=i.offset(),o=0,n=0;e(window).scroll(function(){var a=e(window).scrollTop();a>=t.top?i.addClass("fixed"):i.removeClass("fixed"),Math.abs(o-a)>=n&&(a>o?i.css("transform","translate(0, 0px)"):i.hasClass("fixed")?i.css("transform","translate(0, 80px)"):i.css("transform","translate(0, 0px)")),o=a})},o=function(){e("a[href*=\\#]:not([href=\\#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var i=e(this.hash);if(i=i.length?i:e("[name="+this.hash.slice(1)+"]"),i.length){var t=i.offset().top;return t-=210,e("html,body").animate({scrollTop:t},1e3),!1}}})};return{init:i}}(jQuery),singleResource=function(e){var i=function(){e(window).width()>=480&&t(),e(window).resize(function(){e(window).width()>=480&&t()})},t=function(){var i=e(".js-sizer").eq(0).outerWidth(),t=e(".js-sizer .b-related-resource__post--category").eq(0).outerWidth(),o=i-t,n=e(".b-related-resource__post").eq(0).outerHeight(),a=(n-30)/2;e(".js-sizer .b-related-resource__post--details").css("width",o-1),e(".js-sizer").css("height",a),e(".js-sizer .b-related-resource__post--category").css("min-height",a)};return{init:i}}(jQuery),slider=function(e){var i=function(){t()},t=function(){var i;e(".l-hero__slide").addClass("animate"),i=e(".slide-content").length>1,e(".flexslider").flexslider({animation:"slide",autoplay:!1,touch:i,controlNav:!1,directionNav:!1,nextText:"",prevText:""}),e(".hero-button--prev").on("click",function(){e(".flexslider").flexslider("prev")}),e(".hero-button--next").on("click",function(){e(".flexslider").flexslider("next")}),e(".js-testimonial-slider").slick({autoplay:!0,autoplaySpeed:5e3,infinite:!0,slidesToShow:1,slidesToScroll:1,asNavFor:".js-testimonial-image-slider",appendArrows:e(".b-testimonial-block .js-control-container"),prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>'}),e(".js-testimonial-image-slider").slick({autoplay:!0,autoplaySpeed:5e3,infinite:!0,slidesToShow:1,slidesToScroll:1,asNavFor:".js-testimonial-slider",arrows:!1,fade:!0,cssEase:"linear"})};return{init:i}}(jQuery),treatments=function(e){var i=function(){t()},t=function(){var i,t,o,n=3,a=1,s=!1,l=null;is_device&&(n=3);var r=function(l){s===!1&&(s=!0,t=l?"/wp-json/posts?type="+post_type+"&filter[taxonomy]="+this_tax+"&filter[term]="+l:"/wp-json/posts?type="+post_type+"&filter[posts_per_page]="+n+"&page="+a,e.ajax({type:"GET",url:t,dataType:"json",beforeSend:function(){e(".loading").show(),e(".js-load-more").hide()},success:function(t,l,r){i=r.getResponseHeader("X-WP-Total")/n,e(".loading").hide();for(var c=0;c<t.length;c++){var d=t[c].content.replace(/<\/?[^>]+>/gi,"");d=d.split(" ").slice(0,20).join(" "),t[c].acf.event_date&&(o=moment(t[c].acf.event_date,"DD/MM/YYYY").format("MMMM Do YYYY")),e(".l-archive__row").append('<div class="col-sm-4 l-archive__post l-archive__post--'+c+'"><a href="'+t[c].link+'"><img src="'+t[c].thumb_url+'" alt="" class="l-archive__post--thumb"></a><div class="l-archive__post--container js-match-height"><h4 class="l-archive__post--title"><a href="'+t[c].link+'">'+t[c].title+"</a></h4>"+(o?'<p class="l-archive__post--date">'+o+" at "+t[c].acf.event_time+"</p>":"")+'<p class="l-archive__post--excerpt">'+d+'</p><a href="'+t[c].link+'" class="l-archive__post--link b-button b-button--secondary">Continue Reading</a></div></div>'),e(".l-archive__post--"+c).waypoint({offset:"90%",handler:function(i){e(this.element).addClass("animate")}})}e(".js-match-height").matchHeight(),a===Math.ceil(i)?e(".js-load-more").hide():e(".js-load-more").show(),a++,s=!1},error:function(i,t,o){e(".loading").hide(),console.log(i,t,o)}}))};e("[data-cat]").on("click",function(i){i.preventDefault();var t,o=e(this).data("cat");t="all"===o?"":o,e(".l-archive__row").empty(),a=1,r(t)}),e(".js-archive-filter").on("change.fs",function(){var i,t=this.value;i="all"===t?"":t,e(".l-archive__row").empty(),a=1,r(i)}),e(window).scroll(function(){a<=i&&e(window).scrollTop()+e(window).height()==e(document).height()&&null===is_device&&r(l)}),e(".js-load-more").on("click",function(e){e.preventDefault(),i=Math.ceil(i),a<=i&&r(l)}),r(l)};return{init:i}}(jQuery),vidModal=function(e){function i(){n()}var t=(e("#vid-modal"),function(){e(".js-wistia-hero").each(function(i){var t=e(this).data("wistia-id"),o=e(this).data("video-foam");wistiaEmbed=Wistia.embed(t,{videoFoam:o,autoPlay:!0,controlsVisibleOnLoad:!0,volumeControl:!1,playbar:!1,fullscreenButton:!1,smallPlayButton:!1,container:"wistia_hero_"+t,volume:0,endVideoBehavior:"loop"})})}),o=function(i){var t=(e(i).attr("href"),e(i).data("wistia-id")),o='<div id="wistia_'+t+'" class="wistia_embed">&nbsp;</div>';return e("#vid-modal").addClass("animated"),e("#vid-modal").find(".js-wistia-embed").html(o),wistiaEmbed=Wistia.embed(t,{autoPlay:!0,controlsVisibleOnLoad:!0,volumeControl:!1,playbar:!0,fullscreenButton:!1,smallPlayButton:!0}),wistiaEmbed.bind("end",function(){e("#vid-modal").removeClass("animated"),setTimeout(function(){e("#vid-modal").find(".js-wistia-embed").html("")},200)}),!1},n=function(){e(".js-reveal-video-modal").each(function(){e(this).on("click",function(i){var t=e(this);o(t)})}),e("#js-close-vid-modal").click(function(i){e("#vid-modal").removeClass("animated"),setTimeout(function(){e("#vid-modal").find(".js-wistia-embed").html("")},200),i.preventDefault()})};return{init:i,revealVideoModalHandler:o,setupWistiaVidz:t}}(jQuery);jQuery(window).load(function(e){vidModal.init(),jQuery(".js-wistia-hero").length&&vidModal.setupWistiaVidz()});var vidModal=function(e){function i(){n()}var t=(e("#vid-modal"),function(){e(".js-wistia-hero").each(function(i){var t=e(this).data("wistia-id"),o=e(this).data("video-foam");wistiaEmbed=Wistia.embed(t,{videoFoam:o,autoPlay:!0,controlsVisibleOnLoad:!0,volumeControl:!1,playbar:!1,fullscreenButton:!1,smallPlayButton:!1,container:"wistia_hero_"+t,volume:0,endVideoBehavior:"loop"})})}),o=function(i){var t=(e(i).attr("href"),e(i).data("wistia-id")),o='<div id="wistia_'+t+'" class="wistia_embed">&nbsp;</div>';return e("#vid-modal").addClass("animated"),e("#vid-modal").find(".js-wistia-embed").html(o),wistiaEmbed=Wistia.embed(t,{autoPlay:!0,controlsVisibleOnLoad:!0,volumeControl:!1,playbar:!0,fullscreenButton:!1,smallPlayButton:!0}),wistiaEmbed.bind("end",function(){e("#vid-modal").removeClass("animated"),setTimeout(function(){e("#vid-modal").find(".js-wistia-embed").html("")},200)}),!1},n=function(){e(".js-reveal-video-modal").each(function(){e(this).on("click",function(i){var t=e(this);o(t)})}),e("#js-close-vid-modal").click(function(i){e("#vid-modal").removeClass("animated"),setTimeout(function(){e("#vid-modal").find(".js-wistia-embed").html("")},200),i.preventDefault()})};return{init:i,revealVideoModalHandler:o,setupWistiaVidz:t}}(jQuery),boilerAPP=function(e){this.resizeCooldown=!0,this.settings={screenWidth:0,screenHeight:0,videoCapabilities:!0,screenSize:"desk",homeExpanded:!1,isAnimating:!1,modalOpen:!1,mousewheelSet:!1,debug:!1,isOpen:!1,isCareersOpen:!1,isSnapped:!1},this.domElements={body:e("body"),blogPost:e(".l-blog-detail"),vidModal:e("#vid-modal"),footer:e(".l-footer")};var i=function(){o(),n(),a(),s(),l(),t(),e(".l-single-post__sidebar").length>0&&c(e(".l-single-post__sidebar")),e(window).scroll(function(){r()})},t=function(){var i=e(".l-home__intro--content").outerHeight(),t=e(".l-home__intro--grid").outerHeight();console.log(i),console.log(t),e(".l-home__intro--content").css("top","-39px")},o=function(){e(".js-match-height").matchHeight(),e(".js-back-button").on("click",function(e){return e.preventDefault(),parent.history.back(),!1}),e("[data-link]").on("click",function(){window.location=e(this).data("link")}),e('select[name="secondary-nav"]').fancySelect().on("change.fs",function(){var i=e('select[name="secondary-nav"]'),t=i.val();window.location=t});var i=e(".l-archive .row").length;e(".l-archive .row").eq(i-1).css("margin-bottom",0)},n=function(){e("header").headroom({offset:125,tolerance:{up:50,down:0},classes:{initial:"animated",pinned:"slideDown",unpinned:"slideUp"}})},a=function(){e(document).bind("gform_post_render",function(){e("input[type=file]").customFile(),e("select").fancySelect()}),e("select").fancySelect()},s=function(){var i=e(".js-has-map").outerHeight(),t=e(".l-help__sidebar--map").outerHeight(),o=i+t-29;e(".js-has-map").css("height",o)},l=function(){var i;e("body").on("click",function(t){!e("form.search").hasClass("active")||i||e(t.target).hasClass("searchTerm")||e("form.search").removeClass("active")}),e(".icon-search").on("click",function(t){t.preventDefault(),i=!0,e("form.search").toggleClass("active"),e("input.searchTerm").focus(),setTimeout(function(){i=!i},1e3)})},r=function(){scrollPos=e(this).scrollTop(),e(".l-hero__slide ").css({"background-position":"center "+scrollPos/4+"px"}),e(".l-hero__slide .ab-center").css({"margin-top":scrollPos/4+"px",opacity:1-scrollPos/500})},c=function(i){var t=0,o=i.offset().top,n=e(window);o-=63,n.scroll(function(){var a=e(this).scrollTop();a>t?n.scrollTop()>=o?(i.removeClass("up-fixed"),i.addClass("down-fixed")):(i.removeClass("up-fixed"),i.removeClass("down-fixed")):n.scrollTop()>=o-125?(i.removeClass("down-fixed"),i.addClass("up-fixed")):(i.removeClass("down-fixed"),i.removeClass("up-fixed")),t=a})};return{init:i}}(jQuery);jQuery(document).ready(function(e){boilerAPP.init(),slider.init(),mobileNav.init(),footer.init(),e(".b-brand-grid__module").length>0&&brandGrid.init(),e("#map-canvas").length>0&&map.init(),e(".b-about-section__nav").length>0&&singlePageNav.init(),e("[data-video-url]").length>0&&(vidModal.init(),jQuery(".js-wistia-hero").length&&vidModal.setupWistiaVidz()),e(".l-archive-conditions__condition").length>0&&faqs.init()});